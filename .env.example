# MySQL Database Configuration
DB_HOST=127.0.0.1
DB_PORT=3306
DB_USER=root
DB_PWD=
DB_NAME=crewos
DB_ENCRYPT_KEY=your_encryption_key_here

# LLM Provider Selection
# Options: "openai" or "ollama"
# Use "ollama" for offline/local operation
LLM_PROVIDER=openai

# OpenAI API Configuration (required when LLM_PROVIDER=openai)
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4o-mini
OPENAI_TEMPERATURE=0.1

# Ollama Configuration (required when LLM_PROVIDER=ollama)
# Base URL for Ollama server (default: http://localhost:11434)
OLLAMA_BASE_URL=http://localhost:11434
# Model name for chat/completion (e.g., llama3, mistral, codellama)
OLLAMA_MODEL=llama3
# Model name for embeddings (sentence-transformers model, e.g., all-MiniLM-L6-v2, all-mpnet-base-v2)
OLLAMA_EMBEDDING_MODEL=all-MiniLM-L6-v2

# Orchestrator Agent Configuration
# Controls the main routing agent that decides between SQL and RAG
ORCHESTRATOR_TEMPERATURE=0.1
# Temperature for orchestrator LLM (0.0-2.0)
# Lower = more deterministic routing decisions
# Higher = more creative but potentially inconsistent routing
# Affects: Question classification accuracy, routing decisions

# Agent Enable/Disable Flags (for testing and offline operation)
ENABLE_SQL_AGENT=true
# Enable SQL agent for database queries
# Set to false to disable SQL agent (useful for testing RAG in isolation)
# When disabled, SQL queries will return: "ðŸ”§ SQL Agent is not enabled..."

ENABLE_RAG_AGENT=true
# Enable RAG agent for document retrieval
# Set to false to disable RAG agent (useful for testing SQL in isolation or avoiding HF Hub downloads)
# When disabled, RAG queries will return: "ðŸ“š RAG Agent is not enabled..."
# NOTE: When using Ollama, disabling RAG prevents Hugging Face Hub model downloads

# SQL Agent Core Settings
SQL_AGENT_MAX_ITERATIONS=15
# Maximum workflow iterations (safety limit)

SQL_SAMPLE_ROWS=1
# Sample rows per table shown to LLM for schema understanding
# Affects: Table selection accuracy, column awareness

SQL_MAX_TABLES_IN_CONTEXT=20
# Maximum tables to include in prompts
# Affects: Prompt size, token usage, table selection quality

SQL_CORRECTION_MAX_ATTEMPTS=3
# Maximum SQL correction retries when validation/execution fails
# Affects: Error recovery, query success rate

SQL_PRE_VALIDATION_ENABLED=true
# Enable pre-execution SQL validation (checks columns/joins before DB query)
# Affects: Error detection speed, database load

SQL_CONFIDENCE_THRESHOLD=0.70
# Minimum confidence (0.0-1.0) for relationships to be included
# Used in: JoinPathFinder, filter_relationships
# Higher = only high-confidence relationships (more restrictive)
# Lower = include more relationships (may include uncertain ones)
# Affects: Join path discovery, relationship filtering, SQL generation accuracy

# SQL Agent Prompt Limits (control token usage and context size)
# These limits prevent prompt bloat while ensuring sufficient context for accurate SQL generation
SQL_MAX_RELATIONSHIPS_DISPLAY=50
# Max relationships shown in initial relationship display
# Affects: Token usage in join planning prompt

SQL_MAX_RELATIONSHIPS_IN_PROMPT=20
# Max relationships in SQL generation and correction prompts
# Affects: Token usage, join planning accuracy

SQL_MAX_SUGGESTED_PATHS=15
# Max suggested join paths shown in join planning prompt
# CRITICAL: This is the main source of token bloat - limits paths between all table pairs
# With 10 tables = 45 possible paths. Lower this (10-15) to reduce prompt size significantly
# Affects: Join planning prompt size, token usage, path discovery quality

SQL_MAX_COLUMNS_IN_SCHEMA=50
# Max columns shown in table schemas during join planning
# Affects: Token usage, column awareness in SQL generation

SQL_MAX_COLUMNS_IN_VALIDATION=100
# Max columns shown in validation error messages
# Affects: Error message clarity, token usage in error feedback

SQL_MAX_COLUMNS_IN_CORRECTION=100
# Max columns shown in correction agent table schemas
# Affects: Correction agent context, token usage

SQL_MAX_SQL_HISTORY_LENGTH=100
# Max SQL length stored in correction history
# Affects: Correction history size, memory usage

SQL_MAX_FALLBACK_TABLES=5
# Max tables in fallback selection when LLM fails to select tables
# Affects: Fallback behavior, query success rate

SQL_MAX_TABLES_IN_SELECTION_PROMPT=250
# Max tables shown in table selection prompt
# Affects: Token usage, table selection accuracy

# Token Limits (prevent context overflow)
MAX_CONTEXT_TOKENS=120000
# Maximum input tokens for LLM
# Affects: Maximum prompt size, context window

MAX_OUTPUT_TOKENS=4000
# Maximum output tokens from LLM
# Affects: Response length limits

MAX_QUERY_ROWS=100
# Maximum rows returned from SQL queries
# Affects: Query result size, response time